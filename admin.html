<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - Survivor Pool</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header>
    <h1>Admin Panel</h1>
    <nav>
      <a href="dashboard.html">Dashboard</a>
      <a href="picks.html">Picks</a>
      <a href="standings.html">Standings</a>
      <a href="admin.html" class="active">Admin</a>
      <a href="index.html">Logout</a>
    </nav>
  </header>

  <main>
    <h2>Manage Matchups</h2>
    <p>Add or remove matchups for this weekâ€™s games. These will appear on the Picks page.</p>

    <div class="admin-controls">
      <input type="text" id="homeTeamInput" placeholder="Home Team" />
      <input type="text" id="awayTeamInput" placeholder="Away Team" />
      <button id="addMatchupBtn">Add Matchup</button>
      <button id="clearAllBtn" class="danger-btn">Clear All Matchups</button>
    </div>

    <table id="adminGamesTable">
      <thead>
        <tr>
          <th>Home Team</th>
          <th>Away Team</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <footer>
    <p>&copy; 2025 NFL Survivor Pool</p>
  </footer>

  <script>
    const homeInput = document.getElementById("homeTeamInput");
    const awayInput = document.getElementById("awayTeamInput");
    const addBtn = document.getElementById("addMatchupBtn");
    const clearAllBtn = document.getElementById("clearAllBtn");
    const tableBody = document.getElementById("adminGamesTable").querySelector("tbody");

    let matchups = JSON.parse(localStorage.getItem("matchups")) || [];

    // Render all current matchups
    function renderMatchups() {
      tableBody.innerHTML = "";
      if (matchups.length === 0) {
        tableBody.innerHTML = `<tr><td colspan="3">No matchups added yet.</td></tr>`;
        return;
      }

      matchups.forEach((m, i) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${m.home}</td>
          <td>${m.away}</td>
          <td><button onclick="removeMatchup(${i})" class="danger-btn">Remove</button></td>
        `;
        tableBody.appendChild(row);
      });
    }

    // Add a new matchup
    addBtn.addEventListener("click", () => {
      const home = homeInput.value.trim();
      const away = awayInput.value.trim();

      if (!home || !away) {
        alert("Please enter both team names.");
        return;
      }

      matchups.push({ home, away });
      localStorage.setItem("matchups", JSON.stringify(matchups));

      homeInput.value = "";
      awayInput.value = "";
      renderMatchups();
    });

    // Remove a specific matchup
    function removeMatchup(index) {
      matchups.splice(index, 1);
      localStorage.setItem("matchups", JSON.stringify(matchups));
      renderMatchups();
    }

    // Clear all matchups
    clearAllBtn.addEventListener("click", () => {
      if (confirm("Are you sure you want to clear all matchups?")) {
        matchups = [];
        localStorage.removeItem("matchups");
        renderMatchups();
      }
    });

    renderMatchups();
  </script>

  <script src="js/global.js"></script>
</body>
</html>
