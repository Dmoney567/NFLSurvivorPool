<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Make Your Pick - Survivor Pool</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header>
    <h1>NFL Survivor Pool</h1>
    <nav>
      <a href="dashboard.html">Dashboard</a>
      <a href="picks.html" class="active">Picks</a>
      <a href="standings.html">Standings</a>
      <a href="admin.html">Admin</a>
      <a href="index.html">Logout</a>
    </nav>
  </header>

  <main>
    <h2>Make Your Pick</h2>
    <p>Select one team below. You can only pick one per week.</p>

    <div id="matchupsContainer" class="matchups-container"></div>
    <p id="chosenDisplay" class="chosen-display"></p>
    <button id="submitPickBtn" disabled>Submit Pick</button>
  </main>

  <footer>
    <p>&copy; 2025 NFL Survivor Pool</p>
  </footer>

  <script>
    // Get matchups from localStorage (set by admin page)
    const matchups = JSON.parse(localStorage.getItem("matchups")) || [];
    const container = document.getElementById("matchupsContainer");
    const submitBtn = document.getElementById("submitPickBtn");
    const chosenDisplay = document.getElementById("chosenDisplay");

    let chosenTeam = localStorage.getItem("chosenTeam") || "";

    // Render all matchups
    function renderMatchups() {
      container.innerHTML = "";

      if (matchups.length === 0) {
        container.innerHTML = "<p>No matchups available yet. Check back later!</p>";
        return;
      }

      matchups.forEach((m) => {
        const matchupDiv = document.createElement("div");
        matchupDiv.classList.add("matchup");
        matchupDiv.innerHTML = `
          <div class="teams">
            <button class="team-btn" onclick="chooseTeam('${m.home}')">${m.home}</button>
            <span>vs</span>
            <button class="team-btn" onclick="chooseTeam('${m.away}')">${m.away}</button>
          </div>
        `;
        container.appendChild(matchupDiv);
      });

      if (chosenTeam) {
        chosenDisplay.innerText = `You picked: ${chosenTeam}`;
        submitBtn.disabled = false;
      }
    }

    // Choose one team only
    function chooseTeam(team) {
      chosenTeam = team;
      localStorage.setItem("chosenTeam", team);
      chosenDisplay.innerText = `You picked: ${team}`;
      submitBtn.disabled = false;
    }

    // Submit button (can add more later)
    submitBtn.addEventListener("click", () => {
      alert(`You submitted your pick: ${chosenTeam}`);
    });

    renderMatchups();
  </script>

  <script src="js/global.js"></script>
</body>
</html>
